define(["filter_teamwork/ajax","filter_teamwork/render"],function(t,a){const e=(e,d,s)=>{let r=s.dataset.max_count;d.childElementCount===r&&d.classList.add("stop-drag"),s.childElementCount<r&&s.classList.remove("stop-drag"),((e,d)=>{const s=Array.from(document.querySelectorAll("div[data-team_id]")),r=[],i=e.dataset.student_id;s.forEach(t=>{let a={};a.teamid=t.dataset.team_id,a.studentid=[],Array.from(t.querySelectorAll(".teamwork_student")).forEach(t=>{a.studentid.push(t.dataset.student_id)}),r.push(a)}),t.data={draguserid:i,method:"drag_student_card",newTeams:JSON.stringify(r),activityid:a.data.activityid,moduletype:a.data.moduletype,courseid:a.data.courseid,selectgroupid:a.data.selectgroupid},t.run(d)})(e,function(){a.setDefaultData(),a.studentList(),a.teamsCard()})};return{startDrag:function(){dragula({isContainer:function(t){return t.classList.contains("draggable")},accepts:function(t,a){if(!a.classList.contains("stop-drag"))return a},invalid:function(t,a){if(t.classList.contains("stop-drag-item"))return!0}}).on("drop",e)}}});